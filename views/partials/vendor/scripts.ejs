<!-- views/partials/vendor/scripts.ejs -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Item Management Functions
    function editItem(itemId) {
        window.location.href = `/vendor/items/edit/${itemId}`;
    }

    function deleteItem(itemId) {
        if (confirm('Are you sure you want to delete this item?')) {
            window.location.href = `/vendor/items/delete/${itemId}`;
        }
    }

    function toggleFeaturedItems() {
        // Function to open a modal or page to manage featured items
        alert('Feature management functionality will be implemented soon.');
    }

    function restockItem(itemId) {
        window.location.href = `/vendor/items/restock/${itemId}`;
    }

    // Dark/Light mode toggle if implemented
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        // Save preference to localStorage
        const isDarkMode = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
    }

    // Initialize tooltips
    document.addEventListener('DOMContentLoaded', function () {
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });

        // Check for dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        // Initialize any charts if they exist on the page
        initializeCharts();
    });

    // Sample function to initialize charts
    function initializeCharts() {
        const salesChartElement = document.getElementById('salesChart');
        if (salesChartElement) {
            const salesChart = new Chart(salesChartElement, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Sales',
                        data: [12, 19, 3, 5, 2, 3],
                        borderColor: '#10b981',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true
                }
            });
        }

        const categoryChartElement = document.getElementById('categoryChart');
        if (categoryChartElement) {
            const categoryChart = new Chart(categoryChartElement, {
                type: 'doughnut',
                data: {
                    labels: ['Fruits & Vegetables', 'Dairy', 'Beverages', 'Other'],
                    datasets: [{
                        data: [25, 20, 30, 25],
                        backgroundColor: [
                            '#10b981', '#3b82f6', '#f59e0b', '#6366f1'
                        ]
                    }]
                },
                options: {
                    responsive: true
                }
            });
        }
    }
</script>